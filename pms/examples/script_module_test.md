---
title: Script Module Test
description: Testing SCRIPT_MODULE fragment type that dynamically adds content after table fragments
chapter: Examples

# Page-specific metatags
title: "Script Module Test - Dynamic JavaScript Module Integration"
description: "Testing the new SCRIPT_MODULE fragment type for dynamic content manipulation in PM pages"
keywords: "script_module, javascript, modules, dynamic content, PM components"
author: "Maths.pm - Documentation Team"
robots: "index, follow"
# Open Graph metatags
og:title: "Script Module Test"
og:description: "Testing SCRIPT_MODULE fragment type for dynamic JavaScript integration"
og:type: "article"
og:url: "https://maths.pm/pm/examples/script_module_test.md"
# Twitter Card metatags
twitter:card: "summary"
twitter:title: "Script Module Test"
twitter:description: "PM System Script Module Testing"
# Additional metatags
topic: "PM System Documentation"
category: "Components, Interactive, Testing, Documentation"
revised: "2025-01-15"
pagename: "Script Module Test"

---

[TOC]

# Script Module Test

This page demonstrates the new SCRIPT_MODULE fragment type, which allows embedding JavaScript modules directly in PM pages. The script will dynamically add content after the table below.

## Sample Data Table

This table will be targeted by our script module:

| Programming Language | Difficulty Level | Learning Time | Best For |
|---------------------|------------------|---------------|----------|
| Python | Beginner | 3-6 months | Data Science, Web Development |
| JavaScript | Intermediate | 4-8 months | Web Development, Mobile Apps |
| Java | Intermediate | 6-12 months | Enterprise Applications |
| C++ | Advanced | 12+ months | System Programming, Games |
| Rust | Advanced | 8-15 months | System Programming, Performance |

## Interactive Script Module

The following YAML block contains a JavaScript module that will execute when the page loads:

```yaml
fType: script_module_
type: module
content: |
  // Script Module Test - Dynamic Content Addition
  console.log('üöÄ SCRIPT_MODULE fragment loading...');
  
  // Wait for DOM to be ready
  document.addEventListener('DOMContentLoaded', () => {
    console.log('üìÑ DOM ready, executing script module...');
    
    // Find the table fragment using the data-f_type attribute
    const tableFragment = document.querySelector('[data-f_type="table_"]');
    
    if (tableFragment) {
      console.log('‚úÖ Table fragment found!', tableFragment);
      
      // Count the rows in the table (excluding header)
      const tableRows = tableFragment.querySelectorAll('tbody tr');
      const headerRows = tableFragment.querySelectorAll('thead tr');
      const totalRows = tableRows.length;
      
      // Create a dynamic information panel
      const infoPanel = document.createElement('div');
      infoPanel.className = 'alert alert-success mt-4 p-4 rounded-lg border-l-4 border-green-500 bg-green-50';
      infoPanel.innerHTML = `
        <div class="flex items-start">
          <div class="flex-shrink-0">
            <svg class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
          </div>
          <div class="ml-3">
            <h3 class="text-lg font-medium text-green-800">
              ‚ú® Script Module Executed Successfully!
            </h3>
            <div class="mt-2 text-sm text-green-700">
              <p>This content was dynamically generated by the SCRIPT_MODULE fragment.</p>
              <ul class="mt-2 space-y-1">
                <li><strong>Table Analysis:</strong></li>
                <li>‚Ä¢ Found ${totalRows} programming languages in the table</li>
                <li>‚Ä¢ Header rows: ${headerRows.length}</li>
                <li>‚Ä¢ Data rows: ${totalRows}</li>
                <li>‚Ä¢ Fragment type: ${tableFragment.dataset.f_type}</li>
              </ul>
              <p class="mt-3 font-semibold">üéØ Target achieved: Content inserted after table fragment!</p>
            </div>
          </div>
        </div>
      `;
      
      // Insert the panel right after the table fragment
      tableFragment.insertAdjacentElement('afterend', infoPanel);
      
      // Add some interactive behavior
      setTimeout(() => {
        const interactiveSection = document.createElement('div');
        interactiveSection.className = 'mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200';
        interactiveSection.innerHTML = `
          <h4 class="text-blue-800 font-medium mb-2">üîß Interactive Features Test</h4>
          <button id="highlightTable" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mr-2">
            Highlight Table
          </button>
          <button id="addRow" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">
            Add Dynamic Row
          </button>
          <p class="mt-2 text-sm text-blue-600">Click the buttons to test dynamic interactions!</p>
        `;
        
        infoPanel.insertAdjacentElement('afterend', interactiveSection);
        
        // Add event listeners
        document.getElementById('highlightTable').addEventListener('click', () => {
          tableFragment.style.transition = 'all 0.3s ease';
          tableFragment.style.boxShadow = '0 0 20px rgba(59, 130, 246, 0.5)';
          tableFragment.style.transform = 'scale(1.02)';
          
          setTimeout(() => {
            tableFragment.style.boxShadow = '';
            tableFragment.style.transform = '';
          }, 2000);
        });
        
        document.getElementById('addRow').addEventListener('click', () => {
          const tbody = tableFragment.querySelector('tbody');
          const newRow = document.createElement('tr');
          newRow.innerHTML = `
            <td>Go</td>
            <td>Intermediate</td>
            <td>4-8 months</td>
            <td>Cloud Services, Microservices</td>
          `;
          newRow.style.backgroundColor = '#fef3c7';
          tbody.appendChild(newRow);
          
          // Animate the new row
          setTimeout(() => {
            newRow.style.transition = 'background-color 0.5s ease';
            newRow.style.backgroundColor = '';
          }, 100);
        });
        
      }, 1000);
      
      console.log('üéâ Script module execution completed successfully!');
      
    } else {
      console.error('‚ùå Table fragment not found! Expected element with data-f_type="table_"');
      
      // Create error message
      const errorDiv = document.createElement('div');
      errorDiv.className = 'alert alert-error mt-4 p-4 rounded-lg border-l-4 border-red-500 bg-red-50';
      errorDiv.innerHTML = `
        <h4 class="text-red-800 font-medium">‚ùå Script Module Error</h4>
        <p class="text-red-600 mt-1">Could not find table fragment with data-f_type="table_"</p>
      `;
      
      // Insert after the script's own fragment
      const scriptFragment = document.querySelector('[data-f_type="script_module_"]');
      if (scriptFragment) {
        scriptFragment.insertAdjacentElement('afterend', errorDiv);
      }
    }
  });
  
  // Log that the module script has been loaded
  console.log('üìú Script module loaded and event listener registered');
```

## Expected Behavior

When this page loads, you should see:

1. **Console Messages**: Check browser console for execution logs
2. **Dynamic Content**: A success panel should appear after the table
3. **Interactive Buttons**: Buttons to highlight the table and add rows
4. **Visual Effects**: Animations and styling changes when interacting

## Technical Details

### Fragment Type
- **Type**: `script_module_`
- **YAML Key**: `fType: script_module_`
- **Script Type**: ES6 Module (`type="module"`)
- **Content**: Inline (`content: |`) or File Reference (`src: path/to/file.js`)

### DOM Targeting
- Uses `data-f_type` attributes to find fragments
- Employs `insertAdjacentElement()` for precise placement
- Leverages modern JavaScript features (arrow functions, template literals)

### Security Notes
- Content is processed through Jinja2's `| safe` filter
- Runs in module context with natural scoping
- Compatible with Content Security Policy

This demonstrates the power and flexibility of the new SCRIPT_MODULE fragment type for creating dynamic, interactive PM pages.

---

## File Reference Example

The following example shows how to reference an external JavaScript file instead of embedding the script inline:

### Enhanced Data Table

This table will be enhanced by an external script file:

| Framework | Type | Performance | Learning Curve | Best For |
|-----------|------|-------------|----------------|----------|
| React | Library | High | Medium | SPAs, Component-based UIs |
| Vue.js | Framework | High | Easy | Progressive enhancement |
| Angular | Framework | High | Steep | Enterprise applications |
| Svelte | Compiler | Very High | Easy | Performance-critical apps |
| Next.js | Meta-framework | Very High | Medium | Full-stack React apps |

### External Script Module

```yaml
fType: script_module_
type: module
src: files/scripts/table_enhancer.js
```

This script will:
- Add sortable columns (click headers to sort)
- Enable row highlighting and selection
- Display table statistics
- Provide export functionality
- Allow adding sample rows

### Comparison: Inline vs File Reference

| Approach | Use Case | Advantages | Disadvantages |
|----------|----------|------------|---------------|
| **Inline Content** | Simple scripts, page-specific logic | Easy to maintain, no external dependencies | Can make markdown files large |
| **File Reference** | Complex scripts, reusable modules | Better organization, reusability, syntax highlighting | Requires external file management |

### Best Practices

1. **Use inline content for:**
   - Simple DOM manipulations
   - Page-specific interactions
   - Quick prototypes

2. **Use file references for:**
   - Complex functionality
   - Reusable components
   - Scripts shared across multiple pages
   - When you need proper IDE support and debugging

This dual approach gives you maximum flexibility in how you organize and maintain your interactive PM content.
