<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <title>
      {% block title %}
        {{ DOMAIN_CONFIG['index_view_specific_metatags']['title'] }}
      {% endblock title %}
    </title>
    {% include "base/favicon.html" %}
    {% include "base/imports.html" %}

    <meta name="description" content="{{ DOMAIN_CONFIG['index_view_specific_metatags']['description'] }}" />
    <meta name="keywords" content="{{ DOMAIN_CONFIG['index_view_specific_metatags']['keywords'] }}" />
    <meta name="author" content="{{ DOMAIN_CONFIG['domain_specific_metatags']['author'] }}" />

    <!-- Custom head elements from domain config -->
    {% if DOMAIN_CONFIG.extra_head %}
      {% for js_url in DOMAIN_CONFIG.extra_head.js %}<script src="{{ js_url }}"></script>{% endfor %}

      {% for css_url in DOMAIN_CONFIG.extra_head.css %}
        <link rel="stylesheet" href="{{ css_url }}" />
      {% endfor %}
    {% endif %}

    <!-- ðŸŽ¯ Smart Product Dependency Loader -->
    {% set path_segments = request.url.path.strip('/').split('/') %}
    {% set current_route = path_segments[0] if path_segments and path_segments[0] else '' %}

    {% if current_route %}
      {% for product in products %}
        {% if product.name == current_route and product.backend_settings %}
          <!-- Loading {{ product.name }} dependencies (route: /{{ current_route }}) -->
          {% for setting_key, setting_value in product.backend_settings.items() %}
            {% if setting_value.js_url %}<script src="{{ setting_value.js_url }}"></script>{% endif %}
            {% if setting_value.css_url %}
              <link rel="stylesheet" href="{{ setting_value.css_url }}" />
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endfor %}
    {% endif %}

    <script>
        // Set backend settings as a global JS object
        // ... existing code ...
    </script>

    {% block extra_head %}
    {% endblock extra_head %}
  </head>
  <body class="bg-base-100 text-base-content font-sans min-h-screen">
    {% include "base/data-brick.html" %}

    {% include "base/navbar-alt.html" %}
    {# {% include "base/below-navbar.html" %} #}
    {% include "base/drawer.html" %}

    <main class="container mx-auto max-w-3xl">
      {% block content %}
      {% endblock content %}
    </main>

    {% block footers %}
    {% endblock footers %}

    <!-- Navbar active state management -->
    <script src="{{ request.url_for('static', path='js/navbar-active-state.js') }}"></script>

  </body>
</html>


<!-- Subscription Call-to-Action
      <section class="my-12 p-6 bg-base-200 rounded-lg text-center">
        <h2 class="text-2xl font-semibold mb-4">
Subscribe to My Newsletter
        </h2>
        <p class="mb-6">
Get the latest posts delivered straight to your inbox.
        </p>
        <form action="/subscribe" method="POST" class="flex justify-center">
          <input type="email" placeholder="Enter your email" class="input input-bordered w-full max-w-xs mr-2" required />
          <button type="submit" class="btn btn-primary">
Subscribe
          </button>
        </form>
      </section>
       -->
